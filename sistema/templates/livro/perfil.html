{% extends "base.html" %}
{% load static %}

{% block titulo %} Editar Perfil {% endblock %}

{% block css_local %}
<style>
    .icone-radio input {
        display: none;
    }
   
    .icone-radio img {
        cursor: pointer;
        border: 4px solid transparent;
        border-radius: 50%;
        transition: 0.3s;
        opacity: 0.6;
        object-fit: cover; 
    }
   
    .icone-radio input:checked + img {
        border-color: #0d6efd; 
        opacity: 1;
        transform: scale(1.1);
        box-shadow: 0 0 10px rgba(13, 110, 253, 0.5);
    }
</style>
{% endblock %}

{% block conteudo %}

<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card shadow border-0"> <div class="card-header bg-primary text-white text-center py-3">
                <h4 class="mb-0"><i class="fa-solid fa-user-pen"></i> Meu Perfil</h4>
            </div>
            
            <div class="card-body p-4">
                
                <div class="text-center mb-5">
                    <img src="{% get_static_prefix %}img/icones/{{ user.perfil.icone }}" 
                         alt="Avatar Atual" 
                         class="rounded-circle border border-3 border-light shadow-sm" 
                         width="120" height="120"
                         style="object-fit: cover;">
                    <h3 class="mt-3 fw-bold text-secondary">{{ user.username }}</h3>
                </div>

                <form method="post">
                    {% csrf_token %}
                    
                    <h5 class="text-primary mb-3"><i class="fa-regular fa-id-card"></i> Dados Pessoais</h5>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label fw-bold">Nome</label>
                            {{ u_form.first_name }}
                        </div>
                        <div class="col-md-6">
                            <label class="form-label fw-bold">Sobrenome</label>
                            {{ u_form.last_name }}
                        </div>
                    </div>
                    <div class="mb-4">
                        <label class="form-label fw-bold">Email</label>
                        {{ u_form.email }}
                    </div>

                    <hr class="my-4">

                    <h5 class="text-primary mb-3"><i class="fa-regular fa-image"></i> Escolha seu Avatar</h5>
                    
                    <div class="d-flex justify-content-center flex-wrap gap-4 mb-4 bg-light p-3 rounded">
                        {% for valor, nome in p_form.fields.icone.choices %}
                            <label class="icone-radio" title="{{ nome }}">
                                <input type="radio" name="icone" value="{{ valor }}" {% if user.perfil.icone == valor %}checked{% endif %}>
                                <img src="{% get_static_prefix %}img/icones/{{ valor }}" 
                                     width="70" height="70" alt="Avatar {{ nome }}">
                            </label>
                        {% endfor %}
                    </div>

                    <div class="mb-4">
                        <label class="form-label fw-bold">Sobre Mim</label>
                        {{ p_form.bio }}
                        <div class="form-text">Escreva um pouco sobre seus gostos literários.</div>
                    </div>

                    <div class="d-grid gap-2">
                        <button type="submit" class="btn btn-success btn-lg">
                            <i class="fa-solid fa-check"></i> Salvar Alterações
                        </button>
                        <a href="{% url 'listar_livro' %}" class="btn btn-outline-secondary">Cancelar</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

{% endblock %}